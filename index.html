<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content=
		"width=device-width, initial-scale=1.0">
</head> 

<body>
	

	<button id="LINK_TAB_0" class="tablink" onclick="openTab('INPUT_TAB_0')">      <!-- Menu to open tabs  -->
		Open Tab 0
	</button>
	<button id="LINK_TAB_1" class="tablink" onclick="openTab('INPUT_TAB_1')">
		Open Tab 1
	</button>
	<br><br>
	
	<div id="INPUT_TAB_0" class="tabcontent">     <!-- TAB 0:  -->
	
		<form id="INPUT_FORM_0">
			
		    <div class="form-control">        <!-- strings  -->
			<label for="STRING_0">Insert A String:</label>
			<input id="STRING_0" name="csvString" type="text" value="ciao some string" />
		    </div>
		
		    <div class="form-control">        <!-- numbers  -->
			<label for="NUMBER_0">Insert A Number:</label>
			<input id="NUMBER_0" name="csvNumber" type="number" value="-4.56" />
		    </div>
		
		    <div class="form-control">        <!-- longer strings???  -->
			<label for="LONGTEXT_0">Enter a Message</label>
			<textarea id="LONGTEXT_0" name="csvLongText" rows="6" cols="65"></textarea>
		    </div>
		
		    <div class="form-control">        <!-- logical  -->
			<label for="LOGICAL_0">Check the logical box:</label>
			<input id="LOGICAL_0" name="csvLogical" type="checkbox" value="wasChecked" checked>
		    </div>

		    <div class="form-control">        <!-- multiple choice, radio buttons  -->
			Language Choice:
			<input id="MULTIPLECHOICE_0_A" name="csvMultiplechoice0" type="radio" value="selectedA">
			<label for="MULTIPLECHOICE_0_A">Choice A   </label> 
			<input id="MULTIPLECHOICE_0_B" name="csvMultiplechoice0" type="radio" value="selectedB"  checked>
			<label for="MULTIPLECHOICE_0_B">Choice B   </label> 
			<input id="MULTIPLECHOICE_0_C" name="csvMultiplechoice0" type="radio" value="selectedC">
			<label for="MULTIPLECHOICE_0_C">Choice C   </label>
		    </div>		
		
		</form>
	</div>
		
	<div id="INPUT_TAB_1" class="tabcontent">     <!-- TAB 1:  -->
	
		<form id="INPUT_FORM_1">
		
		    <div class="form-control">        <!-- strings  -->
			<label for="STRING_1">Insert A String #2:</label>
			<input id="STRING_1" name="csvString2" type="text" value="ciao some string v2" />
		    </div>		   
		
		</form>
	</div>


	<br><br>
		
	<button id="SUBMITBUTTON_0" class="btn" onclick="openTab('INPUT_TAB_1')">     <!-- GENERAL DOWNLOAD BUTTON:  -->
		Download
    	</button>
	
		
	
	<script type="text/javascript">
	
		function openTab(selectedTabID) {
			
			var i, allTabs; // defines variables 
		
		  	allTabs = document.getElementsByClassName("tabcontent"); // initialized allTabs variable
			
		  	for (i = 0; i < allTabs.length; i++) {   // "closes" all the tabs
		    		allTabs[i].style.display = "none";
		  	}

			document.getElementById(selectedTabID).style.display = "block";  // opens selected tab	
			
		}

		function downloadCsv(){
			const myFormData = new FormData("INPUT_FORM_0");
		     	const data = Object.fromEntries(myFormData.entries());

			csvRows = [];
		
			const headers = Object.keys(data);	
			const values = Object.values(data);		
			
			for (let i = 0; i < headers.length; i++) {
				const line = [ headers[i], values[i] ];		
				csvRows.push(line.join(','));
			}
			
			
			
			const csvdata = csvRows.join('\n');
			const blob = new Blob([csvdata], { type: 'text/csv' });
			const url = window.URL.createObjectURL(blob)
			const a = document.createElement('a')
			a.setAttribute('href', url)
			a.setAttribute('download', 'download.csv');
			a.click()	
		}


	/*

		const download = function (data) {
		
			console.log("download script");
			const blob = new Blob([data], { type: 'text/csv' });
			const url = window.URL.createObjectURL(blob)
			const a = document.createElement('a')
			a.setAttribute('href', url)
			a.setAttribute('download', 'download.csv');
			a.click()
		}
		

		const csvmaker = function (data) {
			csvRows = [];
		
			const headers = Object.keys(data);	
			const values = Object.values(data);		
			
			for (let i = 0; i < headers.length; i++) {
				const line = [ headers[i], values[i] ];		
				csvRows.push(line.join(','));
			}
			
			return csvRows.join('\n')
		}

		const callbackFunction = async function (event) {
				
			event.preventDefault();
		    	const myFormData = new FormData(event.target);
		     	const data = Object.fromEntries(myFormData.entries());
			
			const csvdata = csvmaker(data);
			download(csvdata);			
		}

*/
	//	const form = document.getElementById('INPUT_FORM_0');
	//	form.addEventListener('submit', callbackFunction);		
		
		document.getElementById("LINK_TAB_0").click();	
		
	</script>
		
</body>
		
</html>
