<!DOCTYPE html>
<html>

<head>
    <script>
        
	function processdata(inputarray){
		console.log("process data");		
		console.log(inputarray[0]);
		console.log(inputarray);
		
	}
 	function loadfile(fileinput) {
	    file=fileinput.files[0];
	    reader = new FileReader();
	    reader.readAsArrayBuffer(file);
	    reader.onload = function() {
	
			arrayBuffer = reader.result;
			floatarray = new  Float32Array(arrayBuffer);
			console.log(floatarray);
			processdata(floatarray);   
	    
	    };
    	}
    	function loadfilex(fileinput) {
	    reader = new FileReader();
	    reader.onload = function() {
	    	for (i=0; i<fileinput.files.length; i++){
			    
		 
		    	file = fileinput.files[i];
		    	reader.readAsArrayBuffer(file);
	
			arrayBuffer = reader.result;
			floatarray = new  Float32Array(arrayBuffer);
			console.log(floatarray);
			processdata(floatarray);   
	    	}
	    };
    	}


    function loadfiles(files) {
	function loadsingle(file) {
	    reader = new FileReader();
	    reader.readAsArrayBuffer(file);
	    reader.onload = function() {
	
			arrayBuffer = reader.result;
			floatarray = new  Float32Array(arrayBuffer);
			console.log(floatarray);
			processdata(floatarray);   
	    
	    };
    	}
    function setup_reader(file) {
        var name = file.name;
        var reader = new FileReader();
        reader.onload = function(e) {
            var bin = e.target.result; //get file content
        }
         
		    	reader.readAsArrayBuffer(file);
	
			arrayBuffer = reader.result;
			floatarray = new  Float32Array(arrayBuffer);
			console.log(floatarray);
			processdata(floatarray);   
    }

    for (var i = 0; i <fileinput.files.length; i++) { loadsingle(fileinput.files[i]); }
}

	    
    function readmultifiles(fileinput) {
		    
	const files = fileinput.files;
	Object.keys(files).forEach(i => {
		const file = files[i];
	    	const reader = new FileReader();
	    	reader.readAsArrayBuffer(file);
	 
	      //server call for uploading or reading the files one-by-one
	      //by using 'reader.result' or 'file'
		    
	    	reader.onload = function() {
		
				arrayBuffer = reader.result;
				floatarray = new  Float32Array(arrayBuffer);
				console.log(floatarray);
				processdata(floatarray);   
	    	}
	}
  
};
       
    </script>
</head>

<body>
<p> hellov </p>
    <input multiple type="file" id="FILE_INPUT" onchange="readmultifiles(this)" />
</body>

</html>
