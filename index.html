<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content=
		"width=device-width, initial-scale=1.0">
</head> 

<body>
	
	<div id="INPUT_TAB_0" class="tabcontent">
	
		<form id="INPUT_FORM_0">
			
		    <div class="form-control">
		        <label for="name">Full Name</label>
		        <input id="name" name="nammme" type="text" value="Cris" />
		    </div>
		    <div class="form-control">
		        <label for="email">Email Address</label>
		        <input id="email" name="email" type="email" value="a@gmail.com" />
		    </div>
		    <div class="form-control">
		        <label for="message">Enter a Message</label>
		        <textarea id="message" name="message" rows="6" cols="65"></textarea>
		    </div>

	    <div class="form-control">
		<input type="radio" id="html" name="fav_language" value="HTML">
		<label for="html">HTML</label><br>
		<input type="radio" id="css" name="fav_language" value="CSS"  checked>
		<label for="css">CSS</label><br>
		<input type="radio" id="javascript" name="fav_language" value="JavaScript">
		<label for="javascript">JavaScript</label>
	    </div>
		
	    <button id="bbb" class="btn" type="submit">Send</button>
	</form>
	</div>
		
	<div id="INPUT_TAB_1" class="tabcontent">
	
		<form id="INPUT_FORM_1">
		
	    <div class="form-control">
	        <label for="name2">Full Name</label>
	        <input id="name2" name="name2" type="text" value="Cris2" />
	    </div>
	   
		
	    <button id="bbb2" class="btn" type="submit">Send2</button>
	</form>
	</div>
	
		
	<button class="tablink" onclick="openTab('INPUT_TAB_0', this, 'red')" id="defaultOpen">London</button>
	<button class="tablink" onclick="openTab('INPUT_TAB_1', this, 'green')" id="notDefaultOpen">Paris</button>
	
<script type="text/javascript">
	
function openTab(tabName, elmnt, color) {
  // Hide all elements with class="tabcontent" by default */
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Remove the background color of all tablinks/buttons
  tablinks = document.getElementsByClassName("tablink");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].style.backgroundColor = "";
  }

  // Show the specific tab content
  document.getElementById(tabName).style.display = "block";

  // Add the specific color to the button used to open the tab content
  elmnt.style.backgroundColor = color;
}


	

const download = function (data) {

	// Creating a Blob for having a csv file format
	// and passing the data with type
	const blob = new Blob([data], { type: 'text/csv' });

	// Creating an object for downloading url
	const url = window.URL.createObjectURL(blob)

	// Creating an anchor(a) tag of HTML
	const a = document.createElement('a')

	// Passing the blob downloading url
	a.setAttribute('href', url)

	// Setting the anchor tag attribute for downloading
	// and passing the download file name
	a.setAttribute('download', 'download.csv');

	// Performing a download with click
	a.click()
}

const csvmaker = function (data) {

console.log(data);
	
	// Empty array for storing the values
	csvRows = [];

	// Headers is basically a keys of an
	// object which is id, name, and
	// profession
	const headers = Object.keys(data);	
	const values = Object.values(data);

	
	for (let i = 0; i < headers.length; i++) {
		const line = [ headers[i], values[i] ];		
		csvRows.push(line.join(','));
	}
	
	// Returning the array joining with new line
	return csvRows.join('\n')
}

const callbackFunction = async function (event) {
		
	event.preventDefault();
    	const myFormData = new FormData(event.target);
     	const data = Object.fromEntries(myFormData.entries());
	
	const csvdata = csvmaker(data);
	download(csvdata);			
}


const form = document.getElementById('INPUT_FORM_0');
form.addEventListener('submit', callbackFunction);


// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();	
		
</script>
</body>
</html>
